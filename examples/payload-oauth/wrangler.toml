# Wrangler configuration for OpenNext + Payload CMS with OAuth
# This file is used by @opennextjs/cloudflare for Workers deployment

name = "payload-parquedb-oauth"
compatibility_date = "2024-09-02"
compatibility_flags = ["nodejs_compat"]

# R2 bucket for Parquet data storage
[[r2_buckets]]
binding = "DATA"
bucket_name = "payload-oauth-data"

# R2 bucket for media uploads (optional)
[[r2_buckets]]
binding = "MEDIA"
bucket_name = "payload-oauth-media"

# Environment variables
[vars]
NODE_ENV = "production"

# SECURITY: Secrets should be set via Cloudflare dashboard or wrangler CLI:
#   wrangler secret put PAYLOAD_SECRET
#   wrangler secret put WORKOS_JWKS_URI
# Never commit secrets to version control!

# Workers Assets for static files
[assets]
directory = ".open-next/assets"

# KV namespace for caching (optional)
# [[kv_namespaces]]
# binding = "CACHE"
# id = "your-kv-namespace-id"
